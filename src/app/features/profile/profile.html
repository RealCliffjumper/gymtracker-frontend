<div class="profile-container">
  <nz-card class="profile-card">
    <div nz-row [nzGutter]="24">
      <div nz-col [nzSpan]="12">
        <form nz-form (ngSubmit)="onSave()" >
          <!-- <div class="profile-avatar">
            <nz-avatar nzSize="large" nzIcon="user"></nz-avatar>
          </div> -->

          <nz-form-item>
            <nz-form-label [nzSpan]="5" class="form-label">First Name</nz-form-label>
            <nz-form-control [nzSpan]="19">
              <input nz-input placeholder="First name" [(ngModel)]="user.userFirstName" name="firstName" />
            </nz-form-control>
          </nz-form-item>

          <nz-form-item>
            <nz-form-label [nzSpan]="5" class="form-label">Last Name</nz-form-label>
            <nz-form-control [nzSpan]="19">
              <input nz-input placeholder="Last name" [(ngModel)]="user.userLastName" name="lastName" />
            </nz-form-control>
          </nz-form-item>

          <nz-form-item>
            <nz-form-label [nzSpan]="5" class="form-label-email">Email</nz-form-label>
            <nz-form-control [nzSpan]="19">
              <input nz-input placeholder="Email" [(ngModel)]="user.userLoginId" name="email" type="email" />
            </nz-form-control>
          </nz-form-item>

          <button nz-button nzType="default" type="button" (click)="openChangePasswordModal()">
            Change Password
          </button>

          <div class="unit-selector">
            <label class="unit-label">Preferred units of weight:</label>
            <nz-radio-group [(ngModel)]="user.unitPreference" name="unit">
              <label nz-radio-button nzValue="KG">KG</label>
              <label nz-radio-button nzValue="LBS">LBS</label>
            </nz-radio-group>
          </div>

          <button nz-button nzType="primary" class="save-btn" type="submit">Save</button>
        </form>
      </div>


      <div nz-col [nzSpan]="12" class="exercises-panel">
        <h3>My exercises</h3>
        <nz-card nzBordered="true" class="exercise-card">
            <p>No exercises added yet.</p>
          <!-- <p *ngIf="!user.exercises?.length">No exercises added yet.</p>
          <ul *ngIf="user.exercises?.length">
            <li *ngFor="let exercise of user.exercises">{{ exercise.name }}</li>
          </ul> -->
        </nz-card>
      </div>
    </div>
  </nz-card>
</div>

<nz-modal
  [(nzVisible)]="isPasswordModalVisible"
  nzTitle="Change Password"
  (nzOnCancel)="handleCancel()"
  (nzOnOk)="handleOk()"
  [nzOkLoading]="isSubmitting"
>
<ng-container *nzModalContent>
  <form [formGroup]="passwordForm" (ngSubmit)="handleOk()">
    <nz-form-item>
      <nz-form-label [nzSpan]="6">Old Password</nz-form-label>
      <nz-form-control [nzSpan]="18">
        <input nz-input type="password" formControlName="oldPassword" />
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="6">New Password</nz-form-label>
      <nz-form-control [nzSpan]="18">
        <input nz-input type="password" formControlName="newPassword" />
      </nz-form-control>
    </nz-form-item>

    <nz-form-item>
      <nz-form-label [nzSpan]="6">Confirm</nz-form-label>
      <nz-form-control [nzSpan]="18">
        <input nz-input type="password" formControlName="confirmPassword" />
      </nz-form-control>
    </nz-form-item>

  </form>
</ng-container>

<div *nzModalFooter>
      <button nz-button nzType="default" type="button" (click)="handleCancel()">Cancel</button>
      <button 
      nz-button nzType="primary" 
      type="submit" 
      (click)="handleOk()" 
      [disabled]="passwordForm.invalid || isSubmitting"
      [ngClass]="{ 'btn-enabled': passwordForm.valid && !isSubmitting }">
        Change Password
      </button>
</div>

</nz-modal>